// Ensure the host element takes up full space
:host {
  display: block;
  width: 100%;
  height: 100%;
}

// Screen reader only content - visually hidden but available to screen readers
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// Wrapper for the entire component
.multilevelpushmenu-wrapper {
  position: relative;
  height: 100%;
  width: 100%;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0); // Remove tap highlight on mobile
}

.level-holder {
  position: absolute;
  overflow: hidden;
  top: 0;
  background: #336ca6;
  min-height: 100%;
  color: #fff;
  transition: transform 0.4s ease-in-out;
  
  // Add overscroll-behavior to prevent body scrolling on iOS
  overscroll-behavior: contain;
  -webkit-overflow-scrolling: touch; // Smooth scrolling on iOS

  &.rtl {
    right: 0;
    box-shadow: -5px 0 5px -5px #1f4164;
  }

  &.ltr {
    left: 0;
    box-shadow: 5px 0 5px -5px #1f4164;
  }

  .title {
    display: flex;
    align-items: center;
    direction: inherit;
    margin: 0;
    padding: 0.6em 0.8em;

    .title-icon {
      background: none;
      border: none;
      padding: 0;
      margin: 0;
      cursor: pointer;
      font-size: inherit;
      display: flex;
      align-items: center;
      color: inherit;
      outline: none;

      // Push icon to the far end depending on direction
      margin-left: auto;
  
      // In RTL, push icon to far left
      [dir="rtl"] & {
        margin-left: 0;
        margin-right: auto;
      }
    }
  }
  
  .back-item {
    display: block;
    background: #2e6196;
    border-top: 1px solid #295685;

    a.back-anchor {
      display: block;
      padding: 1em 1.2em;
      text-decoration: none;
      color: #fff;
      
      // Make touch targets bigger on mobile
      @media (max-width: 768px) {
        padding: 1.2em;
      }

      &:hover,
      &:focus {
        background: #1f4164;
        border-left: 3px solid #fff;
      }

      // Add visual focus state
      &:focus-visible {
        border-left: 3px solid #fff;
        background: #1f4164;
      }
    }
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
    
    li.list-item {
      display: block;
      border-top: 1px solid #295685;

      &:first-child:last-child {
        border-bottom: 1px solid #295685;
      }

      a.anchor {
        display: block;
        padding: 1em 1.2em;
        cursor: pointer;
        color: #fff;
        text-decoration: none;
        
        // Make touch targets bigger on mobile
        @media (max-width: 768px) {
          padding: 1.2em;
        }

        &:hover,
        &:focus {
          background: #295685;
        }

        // Enhanced focus styles for keyboard navigation
        &:focus-visible,
        &.menu-item-focus {
          border-left: 3px solid #fff;
          background: #295685;
        }

        .group-icon {
          display: flex;
          justify-content: center;
        }

        .anchor-icon {
          width: 1.5em;
          display: flex;
          justify-content: center;
        }
      }
    }

    // When the group is empty (has no children)
    &:empty + li.list-item {
      border-bottom: 1px solid #295685;
    }
  }
}

// Content container
#content {
  position: absolute;
  top: 0;
  width: calc(100% - 300px);
  /* Default - will be overridden by component logic */
  height: 100%;
  transition: left 0.4s ease, width 0.4s ease;
  overflow: auto;
  -webkit-overflow-scrolling: touch; // Smooth scrolling on iOS
}

// Visual feedback for swipe gestures
nav.is-swiping {
  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 10px;
    background: rgba(255, 255, 255, 0.1);
    animation: pulse 1s infinite;
  }
}

// Responsive adjustments for mobile devices
@media (max-width: 768px) {
  .level-holder {
    width: 85% !important; // Override inline styles with important
    max-width: 300px;
    
    h2.title {
      font-size: 1.3em;
      padding: 0.8em;
    }
  }
  
  // Make sure the touch area is responsive
  #content {
    width: 100% !important; // Override inline styles
  }
}

// Animation for swipe indicator
@keyframes pulse {
  0% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.7;
  }
  100% {
    opacity: 0.3;
  }
}
